<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        // 撤单详情
        // 已有字段
        let chedan = "委托编号|委托日期|委托时间|分支机构|资产账户|交易类别|股东账号|证券代码|证券名称|买卖方向|委托类别|委托属性|委托价格|委托数量|成交数量|委托状态|废单原因|可撤";
        let chedanNeed = ["资金账户", "交易类别", "证券账号", "证券名称", "证券代码", "受限股份类别", "买卖方向", "委托编号", "委托日期", "委托时间", "委托类别", "委托属性", "委托价格", "委托数量", "委托金额", "对方席位号", "约定号", "委托状态", "联系人姓名", "联系人电话", "成交价格", "成交数量", "成交金额", "成交编号", "撤单数量", "错误信息", ];
        console.log('撤单：', fundDiff(chedan, chedanNeed));

        let dwt = "委托编号|委托日期|委托时间|分支机构|资产账户|交易类别|股东账号|证券代码|证券名称|买卖方向|委托类别|委托属性|委托价格|委托数量|成交数量|委托状态|废单原因|可撤|"
        let dwtNeed = [ "资金账户", "交易类别", "证券账号", "证券名称", "证券代码", "受限股份类别", "买卖方向", "委托编号", "委托日期", "委托时间", "委托类别", "委托属性", "委托价格", "委托数量", "委托金额", "委托方式", "对方席位号", "约定号", "委托状态", "联系人姓名", "联系人电话", "成交价格", "成交数量", "成交金额", "成交编号", "撤单数量", "错误信息",]
        console.log(fundDiff(dwt, dwtNeed));

        let dcj = "交易日期|委托编号|分支机构|资产账户|交易类别|股东账号|证券代码|证券名称|买卖方向|委托属性|委托价格|委托数量|成交数量|对方席位号|成交类型|处理标志|成交价格|成交金额|返回信息|当前时间|证券全称|";
        let dcjNeed = [ '资金账户', '交易类别', '证券账号', '证券名称', '证券代码', '受限股份类别', '买卖方向', '委托编号', '委托日期', '委托时间', '委托类别', '委托属性', '委托价格', '委托数量', '委托金额', '委托方式', '对方席位号', '对方销售商', '对方交易主体类型', '对方交易主体代码', '对方投资者账户名称', '对方交易员', '成交类型', '成交状态', '成交时间', '成交价格', '成交数量', '成交金额', '成交编号', '备注',]
        console.log(fundDiff(dcj, dcjNeed));

        function fundDiff(str, arr) {
            let res = [];
            arr.forEach((item) => {
                if (!str.includes(item)) res.push(item);
            });
            return res.join('|');
        }
    </script>
</body>

</html>